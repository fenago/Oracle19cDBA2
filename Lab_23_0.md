### Lab_23_0: Recovery

**Objective:**
This lab will guide you through various Oracle Database recovery scenarios, including instance or crash recovery, complete recovery, point-in-time recovery, and recovery with the RESETLOGS option. By the end of this lab, you should be able to employ the best Oracle Database recovery technology for your specific failure situation.

**Environment:**
- Database: CDBLAB
- PDBs: PDBLAB1, PDBLAB2

### Part 1: Instance or Crash Recovery

**1. Understanding Instance Recovery:**
- Instance recovery occurs automatically when an Oracle instance crashes and is restarted. It ensures the database is consistent by rolling forward changes in the redo logs and rolling back uncommitted transactions.
  
**Steps:**
1. Simulate an Instance Failure:
   - Shut down the database instance abruptly (optional for understanding, use with caution in a production environment).
   - Example:
     ```sql
     SHUTDOWN ABORT;
     ```
  
2. Start the Database and Monitor Instance Recovery:
   - Start the instance and observe the recovery process.
   - Example:
     ```sql
     STARTUP;
     ```
   - Monitor the alert log to see instance recovery messages.

**Explanation:**
- The instance startup process will automatically perform recovery by applying the redo logs and rolling back uncommitted transactions.

### Part 2: Complete Recovery

**1. Understanding Complete Recovery:**
- Complete recovery is used when you have all redo logs available and can restore the database to its last consistent state before a failure.

**Steps:**
1. Connect to RMAN:
   - Example:
     ```bash
     rman target /
     ```
  
2. Perform Complete Recovery:
   - Restore the database from backups and apply all redo logs.
   - Example:
     ```rman
     RESTORE DATABASE;
     RECOVER DATABASE;
     ALTER DATABASE OPEN;
     ```

**Explanation:**
- The database is restored from the most recent backups and then recovered by applying all available redo logs to bring the database to its last consistent state.

### Part 3: Point-in-Time Recovery

**1. Understanding Point-in-Time Recovery:**
- Point-in-time recovery is used to restore the database to a specific moment before a failure or unwanted changes occurred.

**Steps:**
1. Determine the Target Time:
   - Identify the SCN or timestamp you wish to recover to.

2. Perform Point-in-Time Recovery:
   - Example:
     ```rman
     RESTORE DATABASE;
     RECOVER DATABASE UNTIL TIME 'YYYY-MM-DD HH24:MI:SS';
     ALTER DATABASE OPEN RESETLOGS;
     ```

**Explanation:**
- This recovery process restores the database to a specific point in time, allowing you to undo unwanted changes or recover from a specific failure.

### Part 4: Recovery with RESETLOGS

**1. Understanding RESETLOGS:**
- The RESETLOGS option is used when performing recovery without all archive logs or after point-in-time recovery. It resets the redo log sequence and starts a new incarnation of the database.

**Steps:**
1. Perform Recovery with RESETLOGS:
   - Example:
     ```rman
     RECOVER DATABASE;
     ALTER DATABASE OPEN RESETLOGS;
     ```

**Explanation:**
- RESETLOGS is used to initialize a new redo log sequence. It's necessary when not all redo logs are available or after a point-in-time recovery to avoid confusion in redo log application.

### Part 5: Summary

**Recap:**
In this lab, you learned about different types of recovery in Oracle databases:
- Instance or crash recovery to handle unexpected shutdowns.
- Complete recovery to restore the database to its most recent consistent state.
- Point-in-time recovery to restore the database to a specific time before an unwanted event.
- Recovery with the RESETLOGS option to start a new database incarnation after a recovery.

**Skills Acquired:**
- Understanding Oracle’s automatic and manual recovery processes.
- Employing RMAN to perform various types of recovery.
- Ensuring database integrity through recovery procedures.

**References:**
- Oracle Database Backup and Recovery User’s Guide
- Oracle RMAN Documentation
- Oracle Support for Recovery Scenarios

---

This lab provides a comprehensive guide to Oracle Database recovery, equipping you with the knowledge to manage different failure scenarios effectively.
